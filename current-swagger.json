{"openapi":"3.0.0","info":{"title":"FHIRHub API","version":"1.5.0","description":"\n# API FHIRHub - Convertisseur HL7 vers FHIR R4\n\nPlateforme complète de conversion et d'interopérabilité des données de santé françaises.\n\n## Fonctionnalités principales\n- **Conversion HL7 v2.5 → FHIR R4** avec terminologies françaises (ANS/MOS)\n- **Analyse IA** des données patients avec résumés intelligents\n- **Administration** complète des clés API et applications\n- **Intégration FHIR** avec serveurs externes et locaux\n\n## Authentification\nUtilisez une clé API valide dans l'en-tête `x-api-key` pour tous les endpoints protégés.\n\n## Environnements\n- **Développement**: http://localhost:5000\n- **Production**: Configuré selon déploiement\n\n## Support\n- Documentation complète: [Documentation FHIRHub](/documentation.html)\n- FAQ: [Questions fréquentes](/faq.html)\n      ","contact":{"name":"Équipe FHIRHub","email":"support@fhirhub.fr"},"license":{"name":"Propriétaire","url":"#"}},"servers":[{"url":"http://localhost:5000","description":"Serveur de développement local"},{"url":"/api","description":"API FHIRHub (relatif)"}],"components":{"securitySchemes":{"ApiKeyAuth":{"type":"apiKey","in":"header","name":"x-api-key","description":"Clé API FHIRHub (8-128 caractères alphanumériques)"},"BearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"Token JWT pour authentification utilisateur"}},"schemas":{"HL7Message":{"type":"object","required":["hl7Message"],"properties":{"hl7Message":{"type":"string","description":"Message HL7 v2.5 complet","example":"MSH|^~\\&|SENDER|FACILITY|RECEIVER|FACILITY|202506181200||ADT^A01|MSG001|P|2.5\rPID|1||123456^^^HOSPITAL^MR||DUPONT^JEAN^MARIE||19800315|M|||123 RUE DE LA PAIX^^PARIS^^75001^FR||(01)42.12.34.56|||FR||||||||||\rPV1|1|I|UNIT^ROOM^BED||||DOC123^MARTIN^PAUL^^^Dr|||MED|||||||DOC123^MARTIN^PAUL^^^Dr|INP|VIP|||||||||||||||||||||||202506181200||||||V"},"options":{"type":"object","description":"Options de conversion avancées","properties":{"includeComments":{"type":"boolean","default":false,"description":"Inclure les commentaires de conversion dans la sortie"},"validateOutput":{"type":"boolean","default":true,"description":"Valider le FHIR généré contre le schéma R4"},"frenchTerminology":{"type":"boolean","default":true,"description":"Utiliser les terminologies françaises (ANS/MOS)"}}}}},"FHIRBundle":{"type":"object","description":"Bundle FHIR R4 conforme","properties":{"resourceType":{"type":"string","enum":["Bundle"],"example":"Bundle"},"id":{"type":"string","description":"Identifiant unique du bundle","example":"hl7-conversion-001"},"type":{"type":"string","enum":["transaction","collection","document"],"example":"collection"},"entry":{"type":"array","description":"Ressources FHIR contenues","items":{"type":"object","properties":{"resource":{"type":"object","description":"Ressource FHIR (Patient, Encounter, etc.)"}}}}}},"ConversionResponse":{"type":"object","required":["success","data"],"properties":{"success":{"type":"boolean","description":"Statut de la conversion"},"data":{"$ref":"#/components/schemas/FHIRBundle"},"metadata":{"type":"object","properties":{"conversionTime":{"type":"number","description":"Temps de conversion en millisecondes"},"resourceCount":{"type":"integer","description":"Nombre de ressources FHIR générées"},"warnings":{"type":"array","items":{"type":"string"},"description":"Avertissements lors de la conversion"}}}}},"ErrorResponse":{"type":"object","required":["success","error"],"properties":{"success":{"type":"boolean","enum":[false]},"error":{"type":"string","description":"Type d'erreur"},"message":{"type":"string","description":"Message d'erreur détaillé"},"details":{"type":"object","description":"Détails techniques supplémentaires"}}},"Application":{"type":"object","properties":{"id":{"type":"integer","description":"ID unique de l'application"},"name":{"type":"string","description":"Nom de l'application"},"description":{"type":"string","description":"Description de l'application"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}}},"ApiKey":{"type":"object","properties":{"id":{"type":"integer","description":"ID unique de la clé"},"name":{"type":"string","description":"Nom de la clé API"},"key":{"type":"string","description":"Clé API (masquée en réponse)"},"application_id":{"type":"integer","description":"ID de l'application associée"},"is_active":{"type":"boolean","description":"Statut actif/inactif"},"expires_at":{"type":"string","format":"date-time","nullable":true},"created_at":{"type":"string","format":"date-time"}}}},"responses":{"BadRequest":{"description":"Requête invalide","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"success":false,"error":"Bad Request","message":"Le message HL7 fourni est invalide"}}}},"Unauthorized":{"description":"Authentification requise","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"success":false,"error":"Unauthorized","message":"Clé API manquante ou invalide"}}}},"InternalError":{"description":"Erreur serveur interne","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"success":false,"error":"Internal Server Error","message":"Erreur lors du traitement de la requête"}}}}}},"tags":[{"name":"Conversion","description":"Endpoints de conversion entre formats de santé (HL7 ↔ FHIR)"},{"name":"Intelligence Artificielle","description":"Analyse IA des données patients et résumés intelligents"},{"name":"FHIR","description":"Intégration directe avec serveurs FHIR et manipulation de ressources"},{"name":"Administration","description":"Gestion des applications, clés API et utilisateurs"},{"name":"Système","description":"Informations système, santé et métriques"},{"name":"Terminologies","description":"Gestion des terminologies françaises et mappings"},{"name":"API Keys","description":"Gestion des clés API"},{"name":"Applications","description":"Gestion des applications"},{"name":"Authentification","description":"Gestion de l'authentification"},{"name":"Cache","description":"Gestion du cache de conversion"},{"name":"Admin API","description":"API pour les administrateurs"}],"paths":{"/api/ai/analyze-patient":{"post":{"summary":"Analyse les données d'un patient avec l'IA","description":"Utilise le fournisseur d'IA actif pour générer une analyse du patient à partir des ressources FHIR","tags":["IA"],"security":[{"jwt":[]},{"apiKey":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["patientId","serverUrl"],"properties":{"patientId":{"type":"string","description":"ID du patient à analyser"},"serverUrl":{"type":"string","description":"URL du serveur FHIR"},"patientData":{"type":"object","description":"Données du patient déjà récupérées (optionnel)"}}}}}},"responses":{"200":{"description":"Analyse générée avec succès"},"400":{"description":"Requête invalide"},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/ai/chat":{"post":{"summary":"Interagit avec le chatbot via l'IA active","description":"Utilise le fournisseur d'IA actif pour répondre aux questions du chatbot de support","tags":["IA"],"security":[{"jwt":[]},{"apiKey":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["messages"],"properties":{"messages":{"type":"array","description":"Historique de messages pour la conversation","items":{"type":"object","properties":{"role":{"type":"string","enum":["system","user","assistant"]},"content":{"type":"string"}}}},"max_tokens":{"type":"integer","description":"Nombre maximum de tokens pour la réponse"}}}}}},"responses":{"200":{"description":"Réponse générée avec succès"},"400":{"description":"Requête invalide"},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/ai-knowledge/search":{"post":{"summary":"Recherche des informations dans la base de connaissances (POST)","description":"Permet à l'IA de rechercher des informations pertinentes dans la base de connaissances","tags":["IA Knowledge"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["query"],"properties":{"query":{"type":"string","description":"La requête de recherche"}}}}}},"responses":{"200":{"description":"Résultats de recherche"},"400":{"description":"Requête invalide"},"500":{"description":"Erreur serveur"}}},"get":{"summary":"Recherche des informations dans la base de connaissances (GET)","description":"Permet à l'IA de rechercher des informations pertinentes dans la base de connaissances","tags":["IA Knowledge"],"parameters":[{"in":"query","name":"query","schema":{"type":"string"},"required":true,"description":"La requête de recherche"}],"responses":{"200":{"description":"Résultats de recherche"},"400":{"description":"Requête invalide"},"500":{"description":"Erreur serveur"}}}},"/api/ai-knowledge/faq":{"get":{"summary":"Obtient la liste des FAQ","description":"Permet à l'IA d'accéder aux questions fréquentes","tags":["IA Knowledge"],"responses":{"200":{"description":"Liste des FAQ"},"500":{"description":"Erreur serveur"}}}},"/api/ai-knowledge/features":{"get":{"summary":"Obtient la liste des fonctionnalités","description":"Permet à l'IA d'accéder aux fonctionnalités documentées","tags":["IA Knowledge"],"responses":{"200":{"description":"Liste des fonctionnalités"},"500":{"description":"Erreur serveur"}}}},"/api/ai-knowledge/commands":{"get":{"summary":"Obtient la liste des commandes","description":"Permet à l'IA d'accéder aux commandes documentées","tags":["IA Knowledge"],"responses":{"200":{"description":"Liste des commandes"},"500":{"description":"Erreur serveur"}}}},"/api/ai-knowledge/full":{"get":{"summary":"Obtient la base de connaissances complète","description":"Permet à l'IA d'accéder à la base de connaissances complète","tags":["IA Knowledge"],"responses":{"200":{"description":"Base de connaissances complète"},"500":{"description":"Erreur serveur"}}}},"/api/ai-knowledge/file":{"get":{"summary":"Obtient le fichier de base de connaissances brut","description":"Permet à l'IA d'accéder directement au fichier de connaissances","tags":["IA Knowledge"],"responses":{"200":{"description":"Fichier de connaissances brut"},"500":{"description":"Erreur serveur"}}}},"/api/ai-knowledge/update":{"post":{"summary":"Met à jour la base de connaissances","description":"Permet d'ajouter ou de mettre à jour des connaissances (nécessite une authentification)","tags":["IA Knowledge"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["type","content"],"properties":{"type":{"type":"string","description":"Type de connaissance (faq, feature, command)"},"content":{"type":"object","description":"Contenu de la connaissance"}}}}}},"responses":{"200":{"description":"Base de connaissances mise à jour"},"400":{"description":"Requête invalide"},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/api-keys":{"get":{"summary":"Récupérer toutes les clés API","description":"Récupère la liste de toutes les clés API","tags":["API Keys"],"security":[{"ApiKeyAuth":[]}],"responses":{"200":{"description":"Liste des clés API récupérée avec succès"},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}},"post":{"summary":"Créer une nouvelle clé API","description":"Crée une nouvelle clé API pour une application","tags":["API Keys"],"security":[{"ApiKeyAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["application_id"],"properties":{"application_id":{"type":"integer"},"description":{"type":"string"},"expires_at":{"type":"string","format":"date-time"},"custom_key":{"type":"string","description":"Clé API personnalisée (sinon une clé sera générée automatiquement)"}}}}}},"responses":{"201":{"description":"Clé API créée avec succès"},"400":{"description":"Requête invalide"},"500":{"description":"Erreur serveur"}}}},"/api/api-keys/{id}":{"get":{"summary":"Récupérer une clé API par son ID","description":"Récupère les détails d'une clé API spécifique","tags":["API Keys"],"security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"ID de la clé API"}],"responses":{"200":{"description":"Détails de la clé API récupérés avec succès"},"404":{"description":"Clé API non trouvée"},"500":{"description":"Erreur serveur"}}},"delete":{"summary":"Supprimer une clé API","description":"Supprime définitivement une clé API","tags":["API Keys"],"security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"ID de la clé API"}],"responses":{"200":{"description":"Clé API supprimée avec succès"},"404":{"description":"Clé API non trouvée"},"500":{"description":"Erreur serveur"}}}},"/api/api-keys/{id}/revoke":{"post":{"summary":"Révoquer une clé API","description":"Désactive une clé API existante","tags":["API Keys"],"security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"ID de la clé API"}],"responses":{"200":{"description":"Clé API révoquée avec succès"},"404":{"description":"Clé API non trouvée"},"500":{"description":"Erreur serveur"}}}},"/api/api-keys/{id}/activate":{"post":{"summary":"Activer une clé API","description":"Active une clé API révoquée","tags":["API Keys"],"security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"ID de la clé API"}],"responses":{"200":{"description":"Clé API activée avec succès"},"404":{"description":"Clé API non trouvée"},"500":{"description":"Erreur serveur"}}}},"/api/applications":{"get":{"summary":"Récupérer toutes les applications","description":"Récupère la liste de toutes les applications","tags":["Applications"],"security":[{"ApiKeyAuth":[]}],"responses":{"200":{"description":"Liste des applications récupérée avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"description":{"type":"string"},"cors_origins":{"type":"string"},"created_at":{"type":"string","format":"date-time"}}}}}}}}},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}},"post":{"summary":"Créer une nouvelle application","description":"Crée une nouvelle application avec les paramètres fournis","tags":["Applications"],"security":[{"ApiKeyAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name"],"properties":{"name":{"type":"string"},"description":{"type":"string"},"cors_origins":{"type":"string"},"settings":{"type":"object"}}}}}},"responses":{"201":{"description":"Application créée avec succès"},"400":{"description":"Requête invalide"},"500":{"description":"Erreur serveur"}}}},"/api/applications/{id}":{"get":{"summary":"Récupérer une application par son ID","description":"Récupère les détails d'une application spécifique","tags":["Applications"],"security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"ID de l'application"}],"responses":{"200":{"description":"Détails de l'application récupérés avec succès"},"404":{"description":"Application non trouvée"},"500":{"description":"Erreur serveur"}}},"put":{"summary":"Mettre à jour une application","description":"Met à jour les informations d'une application existante","tags":["Applications"],"security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"ID de l'application"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"cors_origins":{"type":"string"},"settings":{"type":"object"}}}}}},"responses":{"200":{"description":"Application mise à jour avec succès"},"404":{"description":"Application non trouvée"},"500":{"description":"Erreur serveur"}}},"delete":{"summary":"Supprimer une application","description":"Supprime une application et toutes ses clés API associées","tags":["Applications"],"security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"ID de l'application"}],"responses":{"200":{"description":"Application supprimée avec succès"},"404":{"description":"Application non trouvée"},"500":{"description":"Erreur serveur"}}}},"/api/applications/{id}/stats":{"get":{"summary":"Obtenir les statistiques de conversion d'une application","description":"Récupère les statistiques des conversions effectuées pour une application spécifique","tags":["Applications"],"security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"ID de l'application"}],"responses":{"200":{"description":"Statistiques récupérées avec succès"},"404":{"description":"Application non trouvée"},"500":{"description":"Erreur serveur"}}}},"/api/applications/{id}/conversions":{"get":{"summary":"Obtenir l'historique des conversions d'une application","description":"Récupère la liste des conversions effectuées pour une application spécifique avec pagination","tags":["Applications"],"security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"ID de l'application"},{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Numéro de page"},{"in":"query","name":"limit","schema":{"type":"integer","default":10},"description":"Nombre d'éléments par page"}],"responses":{"200":{"description":"Conversions récupérées avec succès"},"404":{"description":"Application non trouvée"},"500":{"description":"Erreur serveur"}}}},"/api/applications/{id}/conversions/{conversionId}":{"get":{"summary":"Obtenir les détails d'une conversion","description":"Récupère les détails complets d'une conversion spécifique d'une application","tags":["Applications"],"security":[{"ApiKeyAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"ID de l'application"},{"in":"path","name":"conversionId","schema":{"type":"integer"},"required":true,"description":"ID de la conversion"}],"responses":{"200":{"description":"Détails de la conversion récupérés avec succès"},"404":{"description":"Application ou conversion non trouvée"},"500":{"description":"Erreur serveur"}}}},"/api/auth/login":{"post":{"summary":"Connexion utilisateur","description":"Authentifie un utilisateur et retourne un token JWT","tags":["Authentification"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","password"],"properties":{"username":{"type":"string"},"password":{"type":"string"}}}}}},"responses":{"200":{"description":"Authentification réussie"},"401":{"description":"Identifiants invalides"},"500":{"description":"Erreur serveur"}}}},"/api/auth/verify":{"get":{"summary":"Vérifier le token JWT","description":"Vérifie la validité du token JWT et retourne les informations de l'utilisateur","tags":["Authentification"],"security":[{"BearerAuth":[]}],"responses":{"200":{"description":"Token valide"},"401":{"description":"Token invalide ou expiré"},"500":{"description":"Erreur serveur"}}}},"/api/cache/stats":{"get":{"summary":"Obtenir les statistiques du cache","description":"Retourne les statistiques détaillées sur l'utilisation du cache (taille, hits, misses)","tags":["Cache"],"security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"responses":{"200":{"description":"Statistiques récupérées avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"memory":{"type":"object","properties":{"size":{"type":"integer","description":"Nombre d'entrées actuellement en cache mémoire"},"maxSize":{"type":"integer","description":"Taille maximale du cache mémoire"},"hits":{"type":"integer","description":"Nombre de fois où une entrée a été trouvée dans le cache mémoire"},"misses":{"type":"integer","description":"Nombre de fois où une entrée n'a pas été trouvée dans le cache mémoire"},"hitRate":{"type":"number","format":"float","description":"Pourcentage de succès du cache mémoire"}}},"disk":{"type":"object","properties":{"size":{"type":"integer","description":"Taille actuelle du cache disque en octets"},"entries":{"type":"integer","description":"Nombre d'entrées dans le cache disque"},"hits":{"type":"integer","description":"Nombre de fois où une entrée a été trouvée dans le cache disque"},"misses":{"type":"integer","description":"Nombre de fois où une entrée n'a pas été trouvée dans le cache disque"},"hitRate":{"type":"number","format":"float","description":"Pourcentage de succès du cache disque"}}},"combined":{"type":"object","properties":{"hits":{"type":"integer","description":"Nombre total de hits (mémoire + disque)"},"misses":{"type":"integer","description":"Nombre total de misses (mémoire + disque)"},"hitRate":{"type":"number","format":"float","description":"Pourcentage de succès global du système de cache"}}}}}}}}}},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/cache/clear":{"post":{"summary":"Vider le cache","description":"Vide une partie ou la totalité du cache de conversion. Nécessite des droits d'administrateur.","tags":["Cache"],"security":[{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","enum":["memory","disk","all"],"description":"Type de cache à vider","default":"all"}}}}}},"responses":{"200":{"description":"Cache vidé avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Le cache a été vidé avec succès."}}}}}},"401":{"description":"Non autorisé"},"403":{"description":"Accès interdit (nécessite des droits d'administrateur)"},"500":{"description":"Erreur serveur"}}}},"/api/convert/hl7-to-fhir":{"post":{"summary":"Conversion HL7 v2.5 vers FHIR R4","description":"Convertit un message HL7 v2.5 en bundle FHIR R4 avec terminologies françaises.\n\n**Fonctionnalités:**\n- Support des segments HL7 : MSH, PID, PV1, OBX, ORC, OBR\n- Terminologies françaises (ANS/MOS) automatiques\n- Validation FHIR R4 complète\n- Génération d'identifiants uniques\n\n**Formats supportés:** ADT^A01, ADT^A02, ADT^A03, ORU^R01, ORM^O01\n","tags":["Conversion"],"security":[{"ApiKeyAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HL7Message"},"examples":{"adtA01":{"summary":"Message ADT^A01 - Admission patient","value":{"hl7Message":"MSH|^~\\&|HOPITAL_SRC|SERVICE_SRC|FHIRHUB|DEST|202506181200||ADT^A01|MSG001|P|2.5\rPID|1||123456789^^^HOPITAL^MR||DUPONT^JEAN^MARIE||19800315|M|||123 RUE DE LA PAIX^^PARIS^^75001^FR||(01)42.12.34.56|||FR||||||||||\rPV1|1|I|CARDIO^CH101^LIT1||||DOC123^MARTIN^PAUL^^^Dr|||CARDIO|||||||DOC123^MARTIN^PAUL^^^Dr|INP|VIP|||||||||||||||||||||||202506181200||||||V","options":{"includeComments":true,"validateOutput":true,"frenchTerminology":true}}},"oruR01":{"summary":"Message ORU^R01 - Résultats de laboratoire","value":{"hl7Message":"MSH|^~\\&|LAB_SRC|LABO|FHIRHUB|DEST|202506181300||ORU^R01|LAB001|P|2.5\rPID|1||987654321^^^LABO^MR||MARTIN^MARIE^CLAIRE||19750520|F\rOBR|1|LAB123|LAB123|88304^ANATOMIE PATHOLOGIQUE^LN|||202506181200|||||||||||DOC456^BERNARD^LUC^^^Dr\rOBX|1|ST|33747-0^HEMOGLOBINE^LN||14.5|g/dL|12.0-15.5||||F","options":{"frenchTerminology":true}}}}}}},"responses":{"200":{"description":"Conversion réussie","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConversionResponse"},"examples":{"success":{"summary":"Conversion réussie","value":{"success":true,"data":{"resourceType":"Bundle","id":"hl7-conversion-001","type":"collection","entry":[{"resource":{"resourceType":"Patient","id":"patient-123456789","identifier":[{"system":"urn:oid:1.2.250.1.213.1.4.10","value":"123456789"}],"name":[{"family":"DUPONT","given":["JEAN","MARIE"]}],"gender":"male","birthDate":"1980-03-15"}}]},"metadata":{"conversionTime":45,"resourceCount":3,"warnings":[]}}}}}}},"400":{"$ref":"#/components/responses/BadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"500":{"$ref":"#/components/responses/InternalError"}}}},"/api/convert/fhir-to-hl7":{"post":{"summary":"Convertir des ressources FHIR en message HL7 v2.5","description":"Convertit des ressources FHIR R4 en message HL7 v2.5 correspondant","tags":["Conversion"],"security":[{"ApiKeyAuth":[]},{"BearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["fhirResources"],"properties":{"fhirResources":{"type":"object","description":"Les ressources FHIR à convertir (peut être un bundle ou un objet individuel)"},"options":{"type":"object","description":"Options supplémentaires pour la conversion","properties":{"hl7Version":{"type":"string","description":"Version HL7 souhaitée (par défaut 2.5)"},"includeNotes":{"type":"boolean","description":"Inclure des notes explicatives"}}}}}}}},"responses":{"200":{"description":"Conversion réussie"},"400":{"description":"Paramètres invalides"},"500":{"description":"Erreur serveur"}}}},"/api/dev/key":{"get":{"summary":"Récupérer la clé API de développement","description":"Récupère la clé API de développement pour les tests (uniquement administrateurs)","tags":["Admin API"],"security":[{"BearerAuth":[]}],"responses":{"200":{"description":"Clé API récupérée avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"apiKey":{"type":"string","description":"Clé API de développement","example":"dev-key"}}}}}}}},"401":{"description":"Non autorisé"},"403":{"description":"Accès interdit (utilisateur non administrateur)"}}}},"/api/dev/all-in-one":{"get":{"summary":"Endpoint tout-en-un pour tester l'authentification","description":"Utilisé pour tester l'authentification combinée JWT + API Key (uniquement administrateurs)","tags":["Admin API"],"security":[{"BearerAuth":[]}],"responses":{"200":{"description":"Test réussi","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"message":{"type":"string","example":"Autorisation réussie ! Vous pouvez utiliser l'API sans restriction."}}}}}}}},"401":{"description":"Non autorisé"}}}},"/api/dev/generate-temp-key":{"get":{"summary":"Générer une clé API temporaire","description":"Crée une clé API temporaire valide pendant 24h pour faciliter les tests (disponible sans authentification)","tags":["Admin API"],"responses":{"200":{"description":"Clé API temporaire générée avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"apiKey":{"type":"string","description":"Clé API temporaire générée"},"expiresAt":{"type":"string","format":"date-time","description":"Date d'expiration de la clé (24h après génération)"},"note":{"type":"string","description":"Instructions d'utilisation"}}}}}}}}}}},"/api/fhir-ai/patient-summary":{"post":{"summary":"Résumé intelligent IA d'un patient FHIR","description":"Génère un résumé médical intelligent d'un patient à partir de ses ressources FHIR.\n\n**Fonctionnalités IA:**\n- Analyse contextuelle des données médicales\n- Synthèse des antécédents et traitements\n- Identification des risques et alertes\n- Recommandations cliniques\n- Support multilingue (français prioritaire)\n\n**Modèles supportés:** Mistral AI, OpenAI GPT, Claude, Ollama local\n","tags":["Intelligence Artificielle"],"security":[{"ApiKeyAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["patientData"],"properties":{"patientData":{"type":"object","description":"Ressources FHIR du patient (Bundle ou ressources individuelles)"},"options":{"type":"object","properties":{"language":{"type":"string","enum":["fr","en"],"default":"fr","description":"Langue du résumé généré"},"detailLevel":{"type":"string","enum":["summary","detailed","comprehensive"],"default":"detailed","description":"Niveau de détail du résumé"},"includeRecommendations":{"type":"boolean","default":true,"description":"Inclure les recommandations cliniques"}}}}},"examples":{"patientBundle":{"summary":"Bundle patient complet","value":{"patientData":{"resourceType":"Bundle","entry":[{"resource":{"resourceType":"Patient","id":"patient-001","name":[{"family":"DUPONT","given":["Jean"]}],"gender":"male","birthDate":"1980-03-15"}},{"resource":{"resourceType":"Condition","subject":{"reference":"Patient/patient-001"},"code":{"coding":[{"system":"http://snomed.info/sct","code":"73211009","display":"Diabète"}]}}}]},"options":{"language":"fr","detailLevel":"detailed","includeRecommendations":true}}}}}}},"responses":{"200":{"description":"Résumé IA généré avec succès","content":{"application/json":{"schema":{"type":"object","required":["success","data"],"properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"summary":{"type":"string","description":"Résumé médical intelligent"},"keyFindings":{"type":"array","items":{"type":"string"},"description":"Points clés identifiés"},"recommendations":{"type":"array","items":{"type":"string"},"description":"Recommandations cliniques"},"riskFactors":{"type":"array","items":{"type":"string"},"description":"Facteurs de risque identifiés"},"aiProvider":{"type":"string","description":"Modèle IA utilisé"},"processingTime":{"type":"number","description":"Temps de traitement en ms"}}}}},"examples":{"aiSummary":{"summary":"Résumé IA patient diabétique","value":{"success":true,"data":{"summary":"Patient de 44 ans, diabétique type 2 diagnostiqué. Bon contrôle glycémique sous traitement. Suivi régulier recommandé.","keyFindings":["Diabète type 2 stable","Pas de complications identifiées","Observance thérapeutique bonne"],"recommendations":["Maintenir le traitement actuel","Contrôle HbA1c trimestriel","Surveillance ophtalmologique annuelle"],"riskFactors":["Antécédents familiaux de diabète","Surpoids (IMC > 25)"],"aiProvider":"Mistral AI","processingTime":1240}}}}}}},"400":{"$ref":"#/components/responses/BadRequest"},"401":{"$ref":"#/components/responses/Unauthorized"},"500":{"$ref":"#/components/responses/InternalError"}}}},"/api/fhir-ai/status":{"get":{"summary":"Statut du service d'IA actif","description":"Vérifie si un fournisseur d'IA est configuré et disponible","tags":["FHIR AI"],"responses":{"200":{"description":"Statut du service d'IA"},"500":{"description":"Erreur serveur"}}}},"/api/fhir-ai/models":{"get":{"summary":"Liste des modèles disponibles pour le fournisseur d'IA actif","description":"Récupère la liste des modèles disponibles pour le fournisseur d'IA actuellement configuré","tags":["FHIR AI"],"responses":{"200":{"description":"Liste des modèles disponibles"},"500":{"description":"Erreur serveur"}}}},"/api/fhir-ai/{serverId}/natural-query":{"post":{"summary":"Requête FHIR en langage naturel","description":"Convertit une question en langage naturel en requête FHIR et l'exécute","tags":["FHIR AI"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["question"],"properties":{"question":{"type":"string","description":"Question en langage naturel"},"model":{"type":"string","default":"mistral-large-latest","description":"Modèle Mistral à utiliser"},"summarize":{"type":"boolean","default":false,"description":"Indique si les résultats doivent être résumés"}}}}}},"responses":{"200":{"description":"Résultats de la requête FHIR"},"400":{"description":"Requête invalide"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir-ai/{serverId}/summarize-patient":{"post":{"summary":"Résumé du dossier d'un patient","description":"Génère un résumé du dossier d'un patient à partir des données FHIR","tags":["FHIR AI"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["patientId"],"properties":{"patientId":{"type":"string","description":"ID du patient"},"model":{"type":"string","default":"mistral-large-latest","description":"Modèle Mistral à utiliser"},"options":{"type":"object","properties":{"includeConditions":{"type":"boolean","default":true,"description":"Inclure les conditions médicales dans le résumé"},"includeObservations":{"type":"boolean","default":true,"description":"Inclure les observations dans le résumé"},"includeMedications":{"type":"boolean","default":true,"description":"Inclure les médicaments dans le résumé"},"includeEncounters":{"type":"boolean","default":true,"description":"Inclure les consultations dans le résumé"}}}}}}}},"responses":{"200":{"description":"Résumé du dossier patient"},"400":{"description":"Requête invalide"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir-ai/{serverId}/analyze-observation":{"post":{"summary":"Analyse d'une observation médicale","description":"Analyse et interprète une observation médicale à partir de son ID","tags":["FHIR AI"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["observationId"],"properties":{"observationId":{"type":"string","description":"ID de l'observation"},"model":{"type":"string","default":"mistral-large-latest","description":"Modèle Mistral à utiliser"}}}}}},"responses":{"200":{"description":"Analyse de l'observation"},"400":{"description":"Requête invalide"},"404":{"description":"Serveur ou observation non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir-ai/{serverId}/analyze-trends":{"post":{"summary":"Analyse des tendances pour un patient","description":"Analyse l'évolution des observations pour un patient sur une période donnée","tags":["FHIR AI"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["patientId","code"],"properties":{"patientId":{"type":"string","description":"ID du patient"},"code":{"type":"string","description":"Code de l'observation (LOINC, SNOMED CT, etc.)"},"period":{"type":"string","default":12,"description":"Période en mois"},"model":{"type":"string","default":"mistral-large-latest","description":"Modèle Mistral à utiliser"}}}}}},"responses":{"200":{"description":"Analyse des tendances"},"400":{"description":"Requête invalide"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir-search/{serverId}/patients":{"get":{"summary":"Recherche avancée de patients","description":"Effectue une recherche avancée de patients avec des critères multiples","tags":["Recherche FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"query","name":"name","schema":{"type":"string"},"description":"Nom ou partie du nom du patient"},{"in":"query","name":"given","schema":{"type":"string"},"description":"Prénom ou partie du prénom du patient"},{"in":"query","name":"family","schema":{"type":"string"},"description":"Nom de famille ou partie du nom de famille du patient"},{"in":"query","name":"identifier","schema":{"type":"string"},"description":"Identifiant du patient (INS, IPP, etc.)"},{"in":"query","name":"gender","schema":{"type":"string","enum":["male","female","other","unknown"]},"description":"Genre du patient"},{"in":"query","name":"birthdate","schema":{"type":"string"},"description":"Date de naissance (format YYYY-MM-DD ou intervalle YYYY-MM-DD,YYYY-MM-DD)"},{"in":"query","name":"address-city","schema":{"type":"string"},"description":"Ville de résidence"},{"in":"query","name":"address-postalcode","schema":{"type":"string"},"description":"Code postal"},{"in":"query","name":"phone","schema":{"type":"string"},"description":"Numéro de téléphone"},{"in":"query","name":"email","schema":{"type":"string"},"description":"Adresse email"},{"in":"query","name":"_count","schema":{"type":"integer","default":20},"description":"Nombre de résultats par page"},{"in":"query","name":"_page","schema":{"type":"integer","default":1},"description":"Numéro de page"}],"responses":{"200":{"description":"Résultats de la recherche"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir-search/{serverId}/patients/by-condition":{"get":{"summary":"Recherche de patients par condition médicale","description":"Recherche les patients atteints d'une condition médicale spécifique","tags":["Recherche FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"query","name":"code","schema":{"type":"string"},"description":"Code de la condition (SNOMED CT, ICD-10, etc.)"},{"in":"query","name":"system","schema":{"type":"string"},"description":"Système de codage (par exemple http://snomed.info/sct)"},{"in":"query","name":"status","schema":{"type":"string"},"description":"Statut de la condition (active, resolved, etc.)"},{"in":"query","name":"_count","schema":{"type":"integer","default":20},"description":"Nombre de résultats par page"},{"in":"query","name":"_page","schema":{"type":"integer","default":1},"description":"Numéro de page"}],"responses":{"200":{"description":"Résultats de la recherche"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir-search/{serverId}/patients/by-observation":{"get":{"summary":"Recherche de patients par observation/résultat de laboratoire","description":"Recherche les patients ayant une observation ou un résultat de laboratoire spécifique","tags":["Recherche FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"query","name":"code","schema":{"type":"string"},"description":"Code de l'observation (LOINC, SNOMED CT, etc.)"},{"in":"query","name":"system","schema":{"type":"string"},"description":"Système de codage (par exemple http://loinc.org)"},{"in":"query","name":"value-quantity-gt","schema":{"type":"string"},"description":"Valeur minimale (supérieure à)"},{"in":"query","name":"value-quantity-lt","schema":{"type":"string"},"description":"Valeur maximale (inférieure à)"},{"in":"query","name":"date","schema":{"type":"string"},"description":"Date de l'observation (format YYYY-MM-DD ou intervalle)"},{"in":"query","name":"_count","schema":{"type":"integer","default":20},"description":"Nombre de résultats par page"},{"in":"query","name":"_page","schema":{"type":"integer","default":1},"description":"Numéro de page"}],"responses":{"200":{"description":"Résultats de la recherche"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir-search/{serverId}/patients/recent":{"get":{"summary":"Patients récemment vus","description":"Récupère la liste des patients récemment vus (basé sur les consultations récentes)","tags":["Recherche FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"query","name":"period","schema":{"type":"string","default":14},"description":"Période en jours (par défaut 14 jours)"},{"in":"query","name":"_count","schema":{"type":"integer","default":20},"description":"Nombre de résultats par page"},{"in":"query","name":"_page","schema":{"type":"integer","default":1},"description":"Numéro de page"}],"responses":{"200":{"description":"Résultats de la recherche"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir-search/{serverId}/meta-search":{"get":{"summary":"Recherche dans plusieurs types de ressources","description":"Effectue une recherche dans plusieurs types de ressources FHIR","tags":["Recherche FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"query","name":"term","required":true,"schema":{"type":"string"},"description":"Terme de recherche"},{"in":"query","name":"types","schema":{"type":"string"},"description":"Types de ressources à inclure (séparés par des virgules)"},{"in":"query","name":"_count","schema":{"type":"integer","default":20},"description":"Nombre de résultats par page"}],"responses":{"200":{"description":"Résultats de la recherche"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir/servers":{"get":{"summary":"Obtenir la liste des serveurs FHIR configurés","description":"Retourne la liste des serveurs FHIR disponibles pour l'application","tags":["FHIR"],"responses":{"200":{"description":"Liste des serveurs récupérée avec succès"},"500":{"description":"Erreur serveur"}}},"post":{"summary":"Ajouter un nouveau serveur FHIR","description":"Ajoute un nouveau serveur FHIR à la configuration","tags":["FHIR"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","url","version"],"properties":{"name":{"type":"string","description":"Nom du serveur FHIR"},"url":{"type":"string","description":"URL du serveur FHIR"},"version":{"type":"string","enum":["DSTU2","DSTU3","R4","R5"],"description":"Version FHIR supportée"},"auth":{"type":"string","enum":["none","basic","token"],"description":"Type d'authentification"},"username":{"type":"string","description":"Nom d'utilisateur (pour auth basic)"},"password":{"type":"string","description":"Mot de passe (pour auth basic)"},"token":{"type":"string","description":"Token d'authentification (pour auth token)"}}}}}},"responses":{"201":{"description":"Serveur FHIR ajouté avec succès"},"400":{"description":"Requête invalide"},"500":{"description":"Erreur serveur"}}}},"/api/fhir/servers/{serverId}":{"get":{"summary":"Obtenir les détails d'un serveur FHIR","description":"Retourne les détails d'un serveur FHIR spécifique","tags":["FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"responses":{"200":{"description":"Détails du serveur récupérés avec succès"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}},"put":{"summary":"Mettre à jour un serveur FHIR","description":"Met à jour les informations d'un serveur FHIR existant","tags":["FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Nom du serveur FHIR"},"url":{"type":"string","description":"URL du serveur FHIR"},"version":{"type":"string","enum":["DSTU2","DSTU3","R4","R5"],"description":"Version FHIR supportée"},"auth":{"type":"string","enum":["none","basic","token"],"description":"Type d'authentification"},"username":{"type":"string","description":"Nom d'utilisateur (pour auth basic)"},"password":{"type":"string","description":"Mot de passe (pour auth basic)"},"token":{"type":"string","description":"Token d'authentification (pour auth token)"},"status":{"type":"string","enum":["active","inactive"],"description":"Statut du serveur"}}}}}},"responses":{"200":{"description":"Serveur FHIR mis à jour avec succès"},"400":{"description":"Requête invalide"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}},"delete":{"summary":"Supprimer un serveur FHIR","description":"Supprime un serveur FHIR de la configuration","tags":["FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"responses":{"200":{"description":"Serveur FHIR supprimé avec succès"},"400":{"description":"Impossible de supprimer le serveur par défaut"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir/servers/{serverId}/test":{"get":{"summary":"Tester la connexion à un serveur FHIR","description":"Vérifie si un serveur FHIR est accessible et répond correctement","tags":["FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR à tester"}],"responses":{"200":{"description":"Test réussi, serveur disponible"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur inaccessible ou ne répond pas correctement"}}}},"/api/fhir/servers/{serverId}/metadata":{"get":{"summary":"Récupérer les métadonnées (CapabilityStatement) d'un serveur FHIR","description":"Récupère le CapabilityStatement du serveur FHIR spécifié","tags":["FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"responses":{"200":{"description":"CapabilityStatement récupéré avec succès"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur inaccessible ou ne répond pas correctement"}}}},"/api/fhir/servers/{serverId}/count/{resourceType}":{"get":{"summary":"Compter le nombre de ressources d'un type spécifique","description":"Récupère le nombre total de ressources d'un type spécifique sur un serveur FHIR","tags":["FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"resourceType","required":true,"schema":{"type":"string"},"description":"Type de ressource FHIR à compter (ex. Patient, Observation)"}],"responses":{"200":{"description":"Nombre de ressources récupéré avec succès"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur inaccessible ou ne répond pas correctement"}}}},"/api/fhir/servers/{serverId}/search/{resourceType}":{"get":{"summary":"Rechercher des ressources FHIR","description":"Recherche des ressources FHIR d'un type spécifique avec pagination et filtres","tags":["FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"resourceType","required":true,"schema":{"type":"string"},"description":"Type de ressource FHIR à rechercher (ex. Patient, Observation)"},{"in":"query","name":"_count","schema":{"type":"integer"},"description":"Nombre d'éléments par page"},{"in":"query","name":"_page","schema":{"type":"integer"},"description":"Numéro de page"}],"responses":{"200":{"description":"Ressources récupérées avec succès"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur inaccessible ou ne répond pas correctement"}}}},"/api/fhir/servers/{serverId}/resource/{resourceType}/{id}":{"get":{"summary":"Récupérer une ressource FHIR par son ID","description":"Récupère une ressource FHIR spécifique par son type et son ID","tags":["FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"resourceType","required":true,"schema":{"type":"string"},"description":"Type de ressource FHIR (ex. Patient, Observation)"},{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID de la ressource à récupérer"}],"responses":{"200":{"description":"Ressource récupérée avec succès"},"404":{"description":"Serveur ou ressource non trouvé(e)"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur inaccessible ou ne répond pas correctement"}}}},"/api/fhir/servers/default/{serverId}":{"put":{"summary":"Définir un serveur FHIR comme serveur par défaut","description":"Définit un serveur FHIR comme serveur par défaut pour l'application","tags":["FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"responses":{"200":{"description":"Serveur par défaut défini avec succès"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir/servers/{serverId}/check":{"get":{"summary":"Vérifier la connectivité d'un serveur FHIR","description":"Vérifie que le serveur FHIR est accessible et fonctionne correctement","tags":["FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"responses":{"200":{"description":"Serveur FHIR accessible"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur inaccessible"}}}},"/api/fhir/servers/{serverId}/local-default":{"post":{"summary":"Définir un serveur FHIR local comme serveur par défaut","description":"Définit un serveur FHIR local (localhost) comme serveur local par défaut pour l'application","tags":["FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR local"}],"responses":{"200":{"description":"Serveur local par défaut défini avec succès"},"400":{"description":"Requête invalide ou serveur non local"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/fhir/metadata":{"get":{"summary":"Récupérer les métadonnées du serveur FHIR","description":"Récupère les capacités et les informations du serveur FHIR (CapabilityStatement)","tags":["FHIR"],"parameters":[{"in":"query","name":"serverId","schema":{"type":"string"},"description":"ID du serveur FHIR à utiliser. Si non fourni, le serveur par défaut sera utilisé."}],"responses":{"200":{"description":"Métadonnées récupérées avec succès"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur indisponible"}}}},"/api/fhir/resources":{"get":{"summary":"Lister les types de ressources disponibles","description":"Récupère la liste des types de ressources disponibles sur le serveur FHIR","tags":["FHIR"],"parameters":[{"in":"query","name":"serverId","schema":{"type":"string"},"description":"ID du serveur FHIR à utiliser. Si non fourni, le serveur par défaut sera utilisé."}],"responses":{"200":{"description":"Liste des types de ressources récupérée avec succès"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur indisponible"}}}},"/api/fhir/search/{resourceType}":{"get":{"summary":"Rechercher des ressources FHIR","description":"Recherche des ressources FHIR du type spécifié avec les critères fournis","tags":["FHIR"],"parameters":[{"in":"path","name":"resourceType","required":true,"schema":{"type":"string"},"description":"Type de ressource FHIR (Patient, Practitioner, etc.)"},{"in":"query","name":"serverId","schema":{"type":"string"},"description":"ID du serveur FHIR à utiliser. Si non fourni, le serveur par défaut sera utilisé."},{"in":"query","name":"_count","schema":{"type":"integer"},"description":"Nombre maximum de résultats à retourner"},{"in":"query","name":"_sort","schema":{"type":"string"},"description":"Champ sur lequel trier les résultats"}],"responses":{"200":{"description":"Recherche effectuée avec succès"},"400":{"description":"Requête invalide"},"404":{"description":"Type de ressource non trouvé"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur indisponible"}}}},"/api/fhir/resource/{resourceType}/{id}":{"get":{"summary":"Récupérer une ressource FHIR spécifique","description":"Récupère une ressource FHIR du type spécifié avec l'ID fourni","tags":["FHIR"],"parameters":[{"in":"path","name":"resourceType","required":true,"schema":{"type":"string"},"description":"Type de ressource FHIR (Patient, Practitioner, etc.)"},{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID de la ressource"},{"in":"query","name":"serverId","schema":{"type":"string"},"description":"ID du serveur FHIR à utiliser. Si non fourni, le serveur par défaut sera utilisé."}],"responses":{"200":{"description":"Ressource récupérée avec succès"},"404":{"description":"Ressource non trouvée"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur indisponible"}}},"put":{"summary":"Mettre à jour une ressource FHIR","description":"Met à jour une ressource FHIR existante du type spécifié avec l'ID fourni","tags":["FHIR"],"parameters":[{"in":"path","name":"resourceType","required":true,"schema":{"type":"string"},"description":"Type de ressource FHIR (Patient, Practitioner, etc.)"},{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID de la ressource"},{"in":"query","name":"serverId","schema":{"type":"string"},"description":"ID du serveur FHIR à utiliser. Si non fourni, le serveur par défaut sera utilisé."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object"}}}},"responses":{"200":{"description":"Ressource mise à jour avec succès"},"400":{"description":"Requête invalide"},"404":{"description":"Ressource non trouvée"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur indisponible"}}},"delete":{"summary":"Supprimer une ressource FHIR","description":"Supprime une ressource FHIR du type spécifié avec l'ID fourni","tags":["FHIR"],"parameters":[{"in":"path","name":"resourceType","required":true,"schema":{"type":"string"},"description":"Type de ressource FHIR (Patient, Practitioner, etc.)"},{"in":"path","name":"id","required":true,"schema":{"type":"string"},"description":"ID de la ressource"},{"in":"query","name":"serverId","schema":{"type":"string"},"description":"ID du serveur FHIR à utiliser. Si non fourni, le serveur par défaut sera utilisé."}],"responses":{"204":{"description":"Ressource supprimée avec succès"},"404":{"description":"Ressource non trouvée"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur indisponible"}}}},"/api/fhir/resource/{resourceType}":{"post":{"summary":"Créer une nouvelle ressource FHIR","description":"Crée une nouvelle ressource FHIR du type spécifié","tags":["FHIR"],"parameters":[{"in":"path","name":"resourceType","required":true,"schema":{"type":"string"},"description":"Type de ressource FHIR (Patient, Practitioner, etc.)"},{"in":"query","name":"serverId","schema":{"type":"string"},"description":"ID du serveur FHIR à utiliser. Si non fourni, le serveur par défaut sera utilisé."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object"}}}},"responses":{"201":{"description":"Ressource créée avec succès"},"400":{"description":"Requête invalide"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur indisponible"}}}},"/api/fhir/transaction":{"post":{"summary":"Exécuter une transaction FHIR","description":"Exécute un Bundle de type transaction ou batch sur le serveur FHIR","tags":["FHIR"],"parameters":[{"in":"query","name":"serverId","schema":{"type":"string"},"description":"ID du serveur FHIR à utiliser. Si non fourni, le serveur par défaut sera utilisé."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object"}}}},"responses":{"200":{"description":"Transaction exécutée avec succès"},"400":{"description":"Requête invalide"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur indisponible"}}}},"/api/fhir/store-bundle":{"post":{"summary":"Stocker un Bundle de ressources FHIR","description":"Stocke un Bundle de ressources FHIR sur le serveur en le transformant en transaction","tags":["FHIR"],"parameters":[{"in":"query","name":"serverId","schema":{"type":"string"},"description":"ID du serveur FHIR à utiliser. Si non fourni, le serveur par défaut sera utilisé."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object"}}}},"responses":{"200":{"description":"Bundle stocké avec succès"},"400":{"description":"Requête invalide"},"500":{"description":"Erreur serveur"},"503":{"description":"Serveur indisponible"}}}},"/api/mistral-fhir/status":{"get":{"summary":"Statut du service d'IA actif","description":"Vérifie si un fournisseur d'IA est configuré et disponible","tags":["FHIR AI"],"responses":{"200":{"description":"Statut du service d'IA"},"500":{"description":"Erreur serveur"}}}},"/api/mistral-fhir/models":{"get":{"summary":"Liste des modèles disponibles pour le fournisseur d'IA actif","description":"Récupère la liste des modèles disponibles pour le fournisseur d'IA actuellement configuré","tags":["FHIR AI"],"responses":{"200":{"description":"Liste des modèles disponibles"},"500":{"description":"Erreur serveur"}}}},"/api/mistral-fhir/{serverId}/natural-query":{"post":{"summary":"Requête FHIR en langage naturel","description":"Convertit une question en langage naturel en requête FHIR et l'exécute","tags":["Mistral FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["question"],"properties":{"question":{"type":"string","description":"Question en langage naturel"},"model":{"type":"string","default":"mistral-large-latest","description":"Modèle Mistral à utiliser"},"summarize":{"type":"boolean","default":false,"description":"Indique si les résultats doivent être résumés"}}}}}},"responses":{"200":{"description":"Résultats de la requête FHIR"},"400":{"description":"Requête invalide"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/mistral-fhir/{serverId}/summarize-patient":{"post":{"summary":"Résumé du dossier d'un patient","description":"Génère un résumé du dossier d'un patient à partir des données FHIR","tags":["Mistral FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["patientId"],"properties":{"patientId":{"type":"string","description":"ID du patient"},"model":{"type":"string","default":"mistral-large-latest","description":"Modèle Mistral à utiliser"},"options":{"type":"object","properties":{"includeConditions":{"type":"boolean","default":true,"description":"Inclure les conditions médicales dans le résumé"},"includeObservations":{"type":"boolean","default":true,"description":"Inclure les observations dans le résumé"},"includeMedications":{"type":"boolean","default":true,"description":"Inclure les médicaments dans le résumé"},"includeEncounters":{"type":"boolean","default":true,"description":"Inclure les consultations dans le résumé"}}}}}}}},"responses":{"200":{"description":"Résumé du dossier patient"},"400":{"description":"Requête invalide"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/mistral-fhir/{serverId}/analyze-observation":{"post":{"summary":"Analyse d'une observation médicale","description":"Analyse et interprète une observation médicale à partir de son ID","tags":["Mistral FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["observationId"],"properties":{"observationId":{"type":"string","description":"ID de l'observation"},"model":{"type":"string","default":"mistral-large-latest","description":"Modèle Mistral à utiliser"}}}}}},"responses":{"200":{"description":"Analyse de l'observation"},"400":{"description":"Requête invalide"},"404":{"description":"Serveur ou observation non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/mistral-fhir/{serverId}/analyze-trends":{"post":{"summary":"Analyse des tendances pour un patient","description":"Analyse l'évolution des observations pour un patient sur une période donnée","tags":["Mistral FHIR"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["patientId","code"],"properties":{"patientId":{"type":"string","description":"ID du patient"},"code":{"type":"string","description":"Code de l'observation (LOINC, SNOMED CT, etc.)"},"period":{"type":"string","default":12,"description":"Période en mois"},"model":{"type":"string","default":"mistral-large-latest","description":"Modèle Mistral à utiliser"}}}}}},"responses":{"200":{"description":"Analyse des tendances"},"400":{"description":"Requête invalide"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients":{"get":{"summary":"Liste des patients","description":"Récupère la liste des patients disponibles sur un serveur FHIR","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"query","name":"name","schema":{"type":"string"},"description":"Recherche par nom"},{"in":"query","name":"_count","schema":{"type":"integer","default":20},"description":"Nombre de résultats par page"},{"in":"query","name":"_offset","schema":{"type":"integer","default":0},"description":"Index de départ des résultats"}],"responses":{"200":{"description":"Liste des patients"},"404":{"description":"Serveur non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}":{"get":{"summary":"Récupérer les détails d'un patient","description":"Récupère les détails complets d'un patient","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"}],"responses":{"200":{"description":"Détails du patient"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}/conditions":{"get":{"summary":"Conditions médicales d'un patient","description":"Récupère la liste des conditions médicales (pathologies, diagnostics) d'un patient","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"}],"responses":{"200":{"description":"Liste des conditions médicales"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}/observations":{"get":{"summary":"Observations et résultats de laboratoire d'un patient","description":"Récupère la liste des observations et résultats de laboratoire d'un patient","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"},{"in":"query","name":"code","schema":{"type":"string"},"description":"Code LOINC ou SNOMED pour filtrer les observations"},{"in":"query","name":"date","schema":{"type":"string"},"description":"Date ou période des observations"}],"responses":{"200":{"description":"Liste des observations"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}/medications":{"get":{"summary":"Traitements médicamenteux d'un patient","description":"Récupère la liste des médicaments et prescriptions d'un patient","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"},{"in":"query","name":"status","schema":{"type":"string"},"description":"Statut des prescriptions (active, completed, etc.)"}],"responses":{"200":{"description":"Liste des médicaments et prescriptions"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}/related-persons":{"get":{"summary":"Personnes liées au patient","description":"Récupère la liste des personnes liées au patient (famille, contacts, etc.)","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"}],"responses":{"200":{"description":"Liste des personnes liées"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}/practitioners":{"get":{"summary":"Praticiens liés au patient","description":"Récupère la liste des praticiens associés au dossier du patient","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"}],"responses":{"200":{"description":"Liste des praticiens"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}/organizations":{"get":{"summary":"Organisations liées au patient","description":"Récupère la liste des organisations liées au dossier du patient","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"}],"responses":{"200":{"description":"Liste des organisations"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}/coverage":{"get":{"summary":"Couvertures d'assurance du patient","description":"Récupère la liste des couvertures d'assurance du patient","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"}],"responses":{"200":{"description":"Liste des couvertures"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}/encounters":{"get":{"summary":"Consultations et séjours d'un patient","description":"Récupère la liste des consultations et séjours hospitaliers d'un patient","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"},{"in":"query","name":"date","schema":{"type":"string"},"description":"Date ou période des consultations"}],"responses":{"200":{"description":"Liste des consultations et séjours"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}/documents":{"get":{"summary":"Documents médicaux d'un patient","description":"Récupère la liste des documents médicaux d'un patient","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"}],"responses":{"200":{"description":"Liste des documents médicaux"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}/summary":{"get":{"summary":"Résumé du dossier patient","description":"Récupère un résumé du dossier patient","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"}],"responses":{"200":{"description":"Résumé du dossier patient"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/patient-viewer/{serverId}/patients/{patientId}/bundle":{"get":{"summary":"Bundle FHIR complet du patient","description":"Récupère un bundle FHIR complet contenant toutes les ressources liées au patient","tags":["Visualisation Patient"],"parameters":[{"in":"path","name":"serverId","required":true,"schema":{"type":"string"},"description":"ID du serveur FHIR"},{"in":"path","name":"patientId","required":true,"schema":{"type":"string"},"description":"ID du patient"}],"responses":{"200":{"description":"Bundle FHIR du patient"},"404":{"description":"Serveur ou patient non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/terminology/french":{"get":{"summary":"Obtenir les informations sur les terminologies françaises","description":"Retourne les informations sur les systèmes de terminologie français utilisés pour la conversion","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"responses":{"200":{"description":"Informations récupérées avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"version":{"type":"string","description":"Version des mappings de terminologies françaises"},"lastUpdated":{"type":"string","format":"date-time","description":"Date de dernière mise à jour des mappings"},"systems":{"type":"object","description":"Systèmes de terminologie français disponibles"},"oids":{"type":"object","description":"OIDs français disponibles"}}}}}}}},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/terminology/files":{"get":{"summary":"Obtenir la liste des fichiers de terminologie","description":"Retourne la liste des fichiers de terminologie disponibles","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"responses":{"200":{"description":"Liste récupérée avec succès"},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/terminology/files/{filename}":{"get":{"summary":"Obtenir le contenu d'un fichier de terminologie","description":"Retourne le contenu d'un fichier de terminologie spécifique","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Contenu récupéré avec succès"},"401":{"description":"Non autorisé"},"404":{"description":"Fichier non trouvé"},"500":{"description":"Erreur serveur"}}},"delete":{"summary":"Supprimer un fichier de terminologie","description":"Supprime un fichier de terminologie spécifique","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Fichier supprimé avec succès"},"401":{"description":"Non autorisé"},"404":{"description":"Fichier non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/terminology/files/{filename}/download":{"get":{"summary":"Télécharger un fichier de terminologie","description":"Télécharge un fichier de terminologie spécifique","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"Fichier téléchargé avec succès"},"401":{"description":"Non autorisé"},"404":{"description":"Fichier non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/terminology/import":{"post":{"summary":"Importer un fichier de terminologie","description":"Importe un fichier de terminologie au format JSON","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"},"type":{"type":"string","description":"Type de terminologie (oids, common_codes, systems, valuesets, r4_systems, r5_systems, auto)"},"description":{"type":"string","description":"Description personnalisée pour ce fichier de terminologie"}}}}}},"responses":{"200":{"description":"Fichier importé avec succès"},"400":{"description":"Requête invalide"},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/terminology/export":{"get":{"summary":"Exporter toutes les terminologies","description":"Exporte toutes les terminologies au format ZIP","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"responses":{"200":{"description":"Terminologies exportées avec succès"},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/terminology/files/{filename}/metadata":{"put":{"summary":"Mettre à jour les métadonnées d'un fichier de terminologie","description":"Met à jour la description et autres métadonnées d'un fichier","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"parameters":[{"name":"filename","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"description":{"type":"string"}}}}}},"responses":{"200":{"description":"Métadonnées mises à jour avec succès"},"400":{"description":"Requête invalide"},"401":{"description":"Non autorisé"},"404":{"description":"Fichier non trouvé"},"500":{"description":"Erreur serveur"}}}},"/api/terminology/analyze":{"post":{"summary":"Analyser tous les fichiers de terminologie","description":"Analyse le contenu de tous les fichiers de terminologie pour fournir des statistiques détaillées","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"responses":{"200":{"description":"Analyse terminée avec succès"},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/terminology/refresh":{"post":{"summary":"Rafraîchir les statistiques de terminologie","description":"Recharge tous les fichiers de terminologie et met à jour les statistiques","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"responses":{"200":{"description":"Rafraîchissement terminé avec succès"},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/terminology/check-duplicates":{"get":{"summary":"Vérifier les fichiers de terminologie en doublon","description":"Identifie les fichiers de terminologie qui contiennent des données similaires","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"responses":{"200":{"description":"Vérification terminée avec succès"},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/terminology/remove-duplicates":{"post":{"summary":"Supprimer les fichiers de terminologie en doublon","description":"Supprime automatiquement les fichiers de terminologie en doublon en gardant les plus récents","tags":["Terminologie"],"security":[{"AdminAuth":[]}],"responses":{"200":{"description":"Suppression terminée avec succès"},"401":{"description":"Non autorisé"},"500":{"description":"Erreur serveur"}}}},"/api/users":{"get":{"summary":"Récupérer tous les utilisateurs","description":"Permet de récupérer la liste de tous les utilisateurs (réservé aux administrateurs)","tags":["Utilisateurs"],"security":[{"bearerAuth":[]},{"apiKeyAuth":[]}],"responses":{"200":{"description":"Liste des utilisateurs récupérée avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"role":{"type":"string"},"created_at":{"type":"string","format":"date-time"}}}}}}}}},"401":{"description":"Non autorisé"},"403":{"description":"Accès refusé"}}},"post":{"summary":"Créer un nouvel utilisateur","description":"Permet de créer un nouvel utilisateur (réservé aux administrateurs)","tags":["Utilisateurs"],"security":[{"bearerAuth":[]},{"apiKeyAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","password","role"],"properties":{"username":{"type":"string","description":"Nom d'utilisateur"},"password":{"type":"string","description":"Mot de passe"},"role":{"type":"string","enum":["admin","user"],"description":"Rôle de l'utilisateur"}}}}}},"responses":{"201":{"description":"Utilisateur créé avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"role":{"type":"string"},"created_at":{"type":"string","format":"date-time"}}}}}}}},"400":{"description":"Requête invalide"},"401":{"description":"Non autorisé"},"403":{"description":"Accès refusé"},"409":{"description":"Conflit (nom d'utilisateur déjà utilisé)"}}}},"/api/users/stats":{"get":{"summary":"Récupérer les statistiques de l'utilisateur connecté","description":"Permet à un utilisateur de récupérer ses propres statistiques (conversions, date de création, etc.)","tags":["Utilisateurs"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Statistiques récupérées avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"conversionCount":{"type":"integer","description":"Nombre de conversions effectuées"},"createdAt":{"type":"string","format":"date-time","description":"Date de création du compte"},"lastLogin":{"type":"string","format":"date-time","description":"Date de dernière connexion"}}}}}}}},"401":{"description":"Non autorisé"}}}},"/api/users/{id}":{"get":{"summary":"Récupérer un utilisateur par son ID","description":"Permet de récupérer les détails d'un utilisateur spécifique (réservé aux administrateurs)","tags":["Utilisateurs"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"ID de l'utilisateur"}],"security":[{"bearerAuth":[]},{"apiKeyAuth":[]}],"responses":{"200":{"description":"Utilisateur récupéré avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"role":{"type":"string"},"created_at":{"type":"string","format":"date-time"}}}}}}}},"401":{"description":"Non autorisé"},"403":{"description":"Accès refusé"},"404":{"description":"Utilisateur non trouvé"}}},"put":{"summary":"Mettre à jour un utilisateur","description":"Permet de mettre à jour les informations d'un utilisateur (réservé aux administrateurs ou à l'utilisateur lui-même)","tags":["Utilisateurs"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"ID de l'utilisateur"}],"security":[{"bearerAuth":[]},{"apiKeyAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string","description":"Nouveau nom d'utilisateur"},"password":{"type":"string","description":"Nouveau mot de passe (optionnel)"},"role":{"type":"string","enum":["admin","user"],"description":"Nouveau rôle (admin uniquement)"}}}}}},"responses":{"200":{"description":"Utilisateur mis à jour avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"id":{"type":"integer"},"username":{"type":"string"},"role":{"type":"string"},"created_at":{"type":"string","format":"date-time"}}}}}}}},"400":{"description":"Requête invalide"},"401":{"description":"Non autorisé"},"403":{"description":"Accès refusé"},"404":{"description":"Utilisateur non trouvé"},"409":{"description":"Conflit (nom d'utilisateur déjà utilisé)"}}},"delete":{"summary":"Supprimer un utilisateur","description":"Permet de supprimer un utilisateur (réservé aux administrateurs)","tags":["Utilisateurs"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"ID de l'utilisateur"}],"security":[{"bearerAuth":[]},{"apiKeyAuth":[]}],"responses":{"200":{"description":"Utilisateur supprimé avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Utilisateur supprimé avec succès"}}}}}},"401":{"description":"Non autorisé"},"403":{"description":"Accès refusé"},"404":{"description":"Utilisateur non trouvé"}}}},"/api/users/{id}/change-password":{"post":{"summary":"Changer le mot de passe d'un utilisateur","description":"Permet à un utilisateur de changer son propre mot de passe ou à un administrateur de changer celui d'un autre utilisateur","tags":["Utilisateurs"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"ID de l'utilisateur"}],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["currentPassword","newPassword"],"properties":{"currentPassword":{"type":"string","description":"Mot de passe actuel"},"newPassword":{"type":"string","description":"Nouveau mot de passe"}}}}}},"responses":{"200":{"description":"Mot de passe mis à jour avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Mot de passe mis à jour avec succès"}}}}}},"400":{"description":"Requête invalide ou mot de passe actuel incorrect"},"401":{"description":"Non autorisé"},"403":{"description":"Accès refusé"},"404":{"description":"Utilisateur non trouvé"}}}},"/api/users/{id}/preferences":{"put":{"summary":"Mettre à jour les préférences d'un utilisateur","description":"Permet à un utilisateur de mettre à jour ses préférences ou à un administrateur de mettre à jour celles d'un autre utilisateur","tags":["Utilisateurs"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"ID de l'utilisateur"}],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"emailNotifications":{"type":"boolean","description":"Recevoir des notifications par email"},"systemNotifications":{"type":"boolean","description":"Recevoir des notifications dans l'application"}}}}}},"responses":{"200":{"description":"Préférences mises à jour avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"message":{"type":"string","example":"Préférences mises à jour avec succès"}}}}}},"401":{"description":"Non autorisé"},"403":{"description":"Accès refusé"},"404":{"description":"Utilisateur non trouvé"}}}},"/api/convert":{"post":{"summary":"Convertir un message HL7 v2.5 en FHIR R4 (format JSON)","description":"Convertit un message HL7 v2.5 en ressources FHIR R4 (Bundle Transaction) selon les spécifications de l'ANS. Le message doit être envoyé au format JSON.","tags":["Conversion"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["hl7Message"],"properties":{"hl7Message":{"type":"string","description":"Message HL7 v2.5 à convertir","example":"MSH|^~\\&|SENDING_APP|SENDING_FACILITY|RECEIVING_APP|RECEIVING_FACILITY|20230801101530||ADT^A01|20230801101530|P|2.5|||||FRA|UNICODE UTF-8|||LAB_HL7_V2\nPID|1||458722781^^^CENTRE_HOSPITALIER_DE_TEST^PI||SECLET^MARYSE BERTHE ALICE||19830711|F|||123 AVENUE DES HÔPITAUX^^PARIS^^75001^FRANCE^H||0123456789^PRN^CP~email@test.fr^NET^^|||||78123456789|||||||||^FR-LYON^N"}}}}}},"responses":{"200":{"description":"Conversion réussie","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Bundle FHIR R4 contenant les ressources converties"}}}}}},"400":{"description":"Requête invalide","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":false},"error":{"type":"string","example":"Bad Request"},"message":{"type":"string","example":"Le message HL7 est requis"}}}}}},"500":{"description":"Erreur serveur"}}}},"/api/convert/raw":{"post":{"summary":"Convertir un message HL7 v2.5 en FHIR R4 (format texte brut)","description":"Convertit un message HL7 v2.5 en ressources FHIR R4 (Bundle Transaction) selon les spécifications de l'ANS. Le message doit être envoyé au format texte brut.","tags":["Conversion"],"requestBody":{"required":true,"content":{"text/plain":{"schema":{"type":"string","description":"Message HL7 v2.5 à convertir en texte brut","example":"MSH|^~\\&|SENDING_APP|SENDING_FACILITY|RECEIVING_APP|RECEIVING_FACILITY|20230801101530||ADT^A01|20230801101530|P|2.5|||||FRA|UNICODE UTF-8|||LAB_HL7_V2\nPID|1||458722781^^^CENTRE_HOSPITALIER_DE_TEST^PI||SECLET^MARYSE BERTHE ALICE||19830711|F|||123 AVENUE DES HÔPITAUX^^PARIS^^75001^FRANCE^H||0123456789^PRN^CP~email@test.fr^NET^^|||||78123456789|||||||||^FR-LYON^N"}}}},"responses":{"200":{"description":"Conversion réussie","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Bundle FHIR R4 contenant les ressources converties"}}}}}},"400":{"description":"Requête invalide"},"500":{"description":"Erreur serveur"}}}},"/api/convert/mllp":{"post":{"summary":"Convertir un message HL7 v2.5 en FHIR R4 (format MLLP)","description":"Convertit un message HL7 v2.5 encapsulé dans le protocole MLLP en ressources FHIR R4 (Bundle Transaction) selon les spécifications de l'ANS.","tags":["Conversion"],"requestBody":{"required":true,"content":{"application/mllp":{"schema":{"type":"string","description":"Message HL7 v2.5 au format MLLP (avec caractères de contrôle)"}}}},"responses":{"200":{"description":"Conversion réussie","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Bundle FHIR R4 contenant les ressources converties"}}}}}},"400":{"description":"Requête invalide"},"500":{"description":"Erreur serveur"}}}},"/api/convert/validate":{"post":{"summary":"Valider un message HL7 v2.5","description":"Vérifie la syntaxe d'un message HL7 v2.5 et retourne des informations sur les segments","tags":["Conversion"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["hl7Message"],"properties":{"hl7Message":{"type":"string","description":"Message HL7 v2.5 à valider"}}}}}},"responses":{"200":{"description":"Validation réussie","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"valid":{"type":"boolean"},"segmentCount":{"type":"integer"},"segmentTypes":{"type":"object","additionalProperties":{"type":"integer"}}}}}}}}},"400":{"description":"Requête invalide"},"500":{"description":"Erreur serveur"}}}},"/api/stats":{"get":{"summary":"Obtenir les statistiques du système","description":"Retourne les statistiques de conversion et les informations du système","tags":["Système"],"responses":{"200":{"description":"Statistiques récupérées avec succès","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"conversions":{"type":"integer","description":"Nombre total de conversions effectuées"},"uptime":{"type":"number","format":"float","description":"Temps de fonctionnement du serveur en secondes"},"memory":{"type":"object","description":"Informations sur la mémoire utilisée"}}}}}}}},"500":{"description":"Erreur serveur"}}}},"/api/reset-stats":{"post":{"summary":"Réinitialise toutes les données statistiques et vide les répertoires temporaires","description":"Supprime les données de conversion, statistiques et vide les dossiers de l'historique, données IN/OUT, etc.","tags":["Statistics"],"responses":{"200":{"description":"Réinitialisation réussie"},"500":{"description":"Erreur serveur"}}}},"/api/system/version":{"get":{"summary":"Version du système FHIRHub","description":"Retourne les informations de version du système FHIRHub.\n\n**Informations incluses:**\n- Version de l'application\n- Date de compilation\n- Environnement d'exécution\n- Statut du système\n","tags":["Système"],"responses":{"200":{"description":"Version du système récupérée avec succès","content":{"application/json":{"schema":{"type":"object","required":["success","data"],"properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","properties":{"version":{"type":"string","description":"Version actuelle du système","example":"1.5.0"},"build_date":{"type":"string","format":"date-time","description":"Date de compilation","example":"2025-06-18T12:00:00.000Z"},"environment":{"type":"string","description":"Environnement d'exécution","example":"development"},"uptime":{"type":"number","description":"Temps de fonctionnement en secondes","example":3600}}}}},"examples":{"systemVersion":{"summary":"Version système complète","value":{"success":true,"data":{"version":"1.5.0","build_date":"2025-06-18T12:00:00.000Z","environment":"development","uptime":3600}}}}}}},"500":{"$ref":"#/components/responses/InternalError"}}}}}}